<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-03-29">
<meta name="keywords" content="social media, natural language processing, social interaction">

<title>cjber.github.io - Comparing rule-based methods and pre-trained language models to classify flood related Tweets</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">cjber.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection">Data Collection</a>
  <ul class="collapse">
  <li><a href="#flood-data" id="toc-flood-data" class="nav-link" data-scroll-target="#flood-data">Flood Data</a></li>
  <li><a href="#tweets" id="toc-tweets" class="nav-link" data-scroll-target="#tweets">Tweets</a></li>
  </ul></li>
  <li><a href="#classification" id="toc-classification" class="nav-link" data-scroll-target="#classification">Classification</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.odt"><i class="bi bi-file"></i>OpenOffice</a></li><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF (arxiv)</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Comparing rule-based methods and pre-trained language models to classify flood related Tweets</h1>
<p class="subtitle lead"><i class="ai  ai-open-access"></i> <i class="ai  ai-doi"></i> <i class="ai  ai-zenodo"></i></p>
  <div class="quarto-categories">
    <div class="quarto-category">open-access</div>
    <div class="quarto-category">peer-reviewed</div>
    <div class="quarto-category">conference</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Cillian Berragan <a href="mailto:c.berragan@liverpool.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0003-2198-2245" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Liverpool
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Alex Singleton <a href="mailto:alex.singleton@liverpool.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-2338-2334" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Liverpool
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Alessia Calafiore <a href="mailto:acalafio@ed.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-5953-2891" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Edinburgh
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Jeremy Morley <a href="mailto:Jeremy.Morley@os.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-3658-8796" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Ordnance Survey
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 29, 2022</p>
    </div>
  </div>
  
    
    <div>
    <div class="quarto-title-meta-heading">Doi</div>
    <div class="quarto-title-meta-contents">
      <p class="doi">
        <a href="https://doi.org/10.5281/zenodo.6411499">10.5281/zenodo.6411499</a>
      </p>
    </div>
  </div>
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>Social media presents a rich source of real-time information provided by individual users in emergency situations. However, due to its unstructured nature and high volume, it is challenging to extract key information from these continuous data streams. This paper compares the ability to identify relevant flood related Tweets between a deep neural classification model known as a transformer, and a simple rule-based classification. Results show that the classification model out-performs the rule-based approach, at the time-cost of labelling and training the model.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>social media, natural language processing, social interaction</p>
  </div>
</div>

</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Twitter presents large continuous feed of information regarding emergency events, contributed through individual users, as these events occur. Many emergency events have been studied in relation to Twitter, including hurricanes and floods in the US <span class="citation" data-cites="hughes2014 kim2018">(<a href="#ref-hughes2014" role="doc-biblioref">Hughes et al. 2014</a>; <a href="#ref-kim2018" role="doc-biblioref">Kim and Hastak 2018</a>)</span>, Paris terror attacks in 2015 <span class="citation" data-cites="reilly2021">(<a href="#ref-reilly2021" role="doc-biblioref">Reilly and Vicari 2021</a>)</span>, and UK flooding events <span class="citation" data-cites="saravanou2015 brouwer2017">(<a href="#ref-saravanou2015" role="doc-biblioref">Saravanou et al. 2015</a>; <a href="#ref-brouwer2017" role="doc-biblioref">Brouwer et al. 2017</a>)</span>.</p>
<p>Extreme weather events have become increasingly common <span class="citation" data-cites="kron2019">(<a href="#ref-kron2019" role="doc-biblioref">Kron, Löw, and Kundzewicz 2019</a>)</span>, a trend that is expected to continue <span class="citation" data-cites="forzieri2017">(<a href="#ref-forzieri2017" role="doc-biblioref">Forzieri et al. 2017</a>)</span>, meaning there is an increasing demand to predict and understand how natural disasters develop. Tweets have proved useful in complementing and supporting emergency response in many cases, and often the first reports about emergencies on social media often precede those of mainstream media <span class="citation" data-cites="perng2013 martinez-rojas2018 kim2018 laylavi2016">(<a href="#ref-perng2013" role="doc-biblioref">Perng et al. 2013</a>; <a href="#ref-martinez-rojas2018" role="doc-biblioref">Martínez-Rojas, Pardo-Ferreira, and Rubio-Romero 2018</a>; <a href="#ref-kim2018" role="doc-biblioref">Kim and Hastak 2018</a>; <a href="#ref-laylavi2016" role="doc-biblioref">Laylavi, Rajabifard, and Kalantari 2016</a>)</span>. It is therefore important to be able to extract flood related Tweets, removing the noise that often comes with social media streams <span class="citation" data-cites="ashktorab2014">(<a href="#ref-ashktorab2014" role="doc-biblioref">Ashktorab et al. 2014</a>)</span>.</p>
<p>Much of the past work that has used Twitter to study past emergency events has used keywords to identify relevant Tweets <span class="citation" data-cites="kryvasheyeu2016 brouwer2017 morstatter2013">(<a href="#ref-kryvasheyeu2016" role="doc-biblioref">Kryvasheyeu et al. 2016</a>; <a href="#ref-brouwer2017" role="doc-biblioref">Brouwer et al. 2017</a>; <a href="#ref-morstatter2013" role="doc-biblioref">Morstatter et al. 2013</a>)</span>. This however has several issues, keywords are human selected, meaning they require a pre-existing knowledge of the semantics used to describe targeted events. Certain keywords also do not always relate to these emergency events <span class="citation" data-cites="sakaki2010 spielhofer2016">(<a href="#ref-sakaki2010" role="doc-biblioref">Sakaki, Okazaki, and Matsuo 2010</a>; <a href="#ref-spielhofer2016" role="doc-biblioref">Spielhofer et al. 2016</a>)</span>, for example a person may be in <em>‘floods of tears’</em>. Finally, Tweets relevant to emergency events also do not necessarily contain an obvious keyword (<em>‘Cars are floating down the street!’</em>), and therefore are unable to be detected. More recent work has considered the ability to use machine learning to classify Tweets into those relevant to emergency events, and those that are irrelevant <span class="citation" data-cites="imran2020 arthur2018 sakaki2010 li2018b">(<a href="#ref-imran2020" role="doc-biblioref">Imran et al. 2020</a>; <a href="#ref-arthur2018" role="doc-biblioref">Arthur et al. 2018</a>; <a href="#ref-sakaki2010" role="doc-biblioref">Sakaki, Okazaki, and Matsuo 2010</a>; <a href="#ref-li2018b" role="doc-biblioref">Li et al. 2018</a>)</span>. These studies have utilised a variety of methods, building from classical approaches like Naïve Bayes classification <span class="citation" data-cites="imran2013 li2018b">(<a href="#ref-imran2013" role="doc-biblioref">Imran et al. 2013</a>; <a href="#ref-li2018b" role="doc-biblioref">Li et al. 2018</a>)</span> and Support Vector Machines (SVMs) <span class="citation" data-cites="caragea2011 sakaki2010">(<a href="#ref-caragea2011" role="doc-biblioref">Caragea et al. 2011</a>; <a href="#ref-sakaki2010" role="doc-biblioref">Sakaki, Okazaki, and Matsuo 2010</a>)</span>, while more recent work has considered the emerging prevalence of neural networks in text-based classification <span class="citation" data-cites="caragea2016 debruijn2020 nguyen2017">(<a href="#ref-caragea2016" role="doc-biblioref">Caragea, Silvescu, and Tapia 2016</a>; <a href="#ref-debruijn2020" role="doc-biblioref">de Bruijn et al. 2020</a>; <a href="#ref-nguyen2017" role="doc-biblioref">Nguyen et al. 2017</a>)</span>. Traditional machine learning methods however rely on the use of feature engineering to determine model input, are unable to preserve word order, and have limited capability to use context, often over-fitting based on features selected <span class="citation" data-cites="caragea2016">(<a href="#ref-caragea2016" role="doc-biblioref">Caragea, Silvescu, and Tapia 2016</a>)</span>. Work with neural networks has shown that given pre-trained word embeddings, they have the capability to outperform these methods <span class="citation" data-cites="ghafarian2020 caragea2016 algiriyage2021">(<a href="#ref-ghafarian2020" role="doc-biblioref">Ghafarian and Yazdi 2020</a>; <a href="#ref-caragea2016" role="doc-biblioref">Caragea, Silvescu, and Tapia 2016</a>; <a href="#ref-algiriyage2021" role="doc-biblioref">Algiriyage and Prasanna 2021</a>)</span>.</p>
<p>This work considers the retrospective classification of a selection of Tweets from past flooding events in the United Kingdom, evaluating the effectiveness of a neural classification model called a transformer against a keyword based approach. This work aims to demonstrate the benefits and costs of the use of new sophisticated methods in natural language processing for this task. Further work is expected to build on this, allowing for information extraction from the relevant Tweets to inform first responders, providing more fine-grained information based on the first-hand experience of individuals like specific property damage, or missing persons, allowing social media to complement existing methods used during flood events [muller2015].</p>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="data-collection" class="level2">
<h2 class="anchored" data-anchor-id="data-collection">Data Collection</h2>
<section id="flood-data" class="level3">
<h3 class="anchored" data-anchor-id="flood-data">Flood Data</h3>
<p>A historical dataset containing all <em>Severe Flood Warnings</em>, <em>Flood Warnings</em>, and <em>Flood Alerts</em> issued by the <a href="https://flood-warning-information.service.gov.uk/warnings">UK flood warning system</a> is available through the <a href="https://data.gov.uk/dataset/d4fb2591-f4dd-4e7f-9aaf-49af94437b36/historic-flood-warnings">UK Government</a> under the <a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence</a>. This data was linked with flood zones from the <a href="https://environment.data.gov.uk/flood-monitoring/doc/reference">Environment Agency Real Time Flood-Monitoring API</a>. To reduce the volume of flood events being considered, only <em>Severe Flood Warnings</em> occurring after 2010 were selected, leaving a total of 314 individual <em>Severe Flood Warning</em> events.</p>
</section>
<section id="tweets" class="level3">
<h3 class="anchored" data-anchor-id="tweets">Tweets</h3>
<p>The <a href="https://developer.twitter.com/en/docs/twitter-api/early-access">Twitter API v2</a> was used to extract Tweets from the full historic Tweet archive. For each flood warning the query was constructed using several requirements:</p>
<ul>
<li><strong>Time-frame:</strong> 7 days before to 7 days after flood warning</li>
<li><strong>Bounds:</strong> Bounding box of the relevant flood area</li>
<li><strong>Parameters:</strong> has <em>geography</em>, exclude retweets, exclude replies, exclude quotes</li>
</ul>
<p>Geographic information associated with every Tweet was required due to the decision to use bounding boxes to pre-emptively filter Tweets in areas not subject to flooding. The new Twitter API now uses a combination of factors to associate geographic coordinates with Tweets which overcomes the issues with limited availability of geotags found with many previous studies <span class="citation" data-cites="middleton2014 carley2016 morstatter2013">(<a href="#ref-middleton2014" role="doc-biblioref">Middleton, Middleton, and Modafferi 2014</a>; <a href="#ref-carley2016" role="doc-biblioref">Carley et al. 2016</a>; <a href="#ref-morstatter2013" role="doc-biblioref">Morstatter et al. 2013</a>)</span>. Geography associated with a Tweet may now include either <em>geotags</em>, <em>user profile location</em> or <em>locations mentioned in Tweet</em>. The total number of Tweets extracted was 89,864, with an average of 286 Tweets per flood warning. From this corpus, only a random subset of ~2,500 Tweets were considered for training and evaluation, selecting a subset that balances time constraints and mirroring the corpus size of past work <span class="citation" data-cites="caragea2016 ghafarian2020">(<a href="#ref-caragea2016" role="doc-biblioref">Caragea, Silvescu, and Tapia 2016</a>; <a href="#ref-ghafarian2020" role="doc-biblioref">Ghafarian and Yazdi 2020</a>)</span>.</p>
</section>
</section>
<section id="classification" class="level2">
<h2 class="anchored" data-anchor-id="classification">Classification</h2>
<div id="fig-workflow" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-workflow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figs/workflow.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-workflow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Overview of the model processing pipeline.
</figcaption>
</figure>
</div>
<p><a href="#fig-workflow" class="quarto-xref">Figure&nbsp;1</a> gives an overview of the classification pipeline used, each Tweet was first pre-processed to normalise usernames and web addresses, and hashtags were parsed to extract words <span class="citation" data-cites="pota2020">(<a href="#ref-pota2020" role="doc-biblioref">Pota et al. 2020</a>)</span> (Stage 1). The selected ~2,500 Tweets were manually annotated to train the classification model using <a href="https://github.com/doccano/doccano">Doccano</a> <span class="citation" data-cites="nakayama2018">(<a href="#ref-nakayama2018" role="doc-biblioref">Nakayama et al. 2018</a>)</span>, with 20% used for model validation (Stage 2). The validation subset was then used to evaluate model performance in relation to the simple rule-based approach (Stage 3).</p>
<p>The model builds on the established NLP task of sequence classification, taking token sequences (<span class="math inline">\(\mathbf{x} = \{x_{0}, x_{1}\dots x_{n}\}\)</span>), and predicting a single label (<span class="math inline">\(\mathit{y}\)</span>). A pre-trained transformer language model based on the RoBERTa architecture was used as a base, pre-trained using a corpus of 58 million Tweets <span class="citation" data-cites="barbieri2020">(<a href="#ref-barbieri2020" role="doc-biblioref">Barbieri et al. 2020</a>)</span><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>To construct a rule-based approach for evaluation against this model, Tweets from the validation subset that included a selection of 456 keywords provided by <span class="citation" data-cites="saravanou2015">(<a href="#ref-saravanou2015" role="doc-biblioref">Saravanou et al. 2015</a>)</span> were labelled as being flood related (<em>FLOOD</em>), while all Tweets that did not contain this selection of keywords were labelled as <em>NOT_FLOOD</em>.</p>
<p>For comparative evaluation, the F<sub>1</sub> metric was used, which takes the harmonic mean of the precision and recall, meaning class imbalance is accounted for. To qualitatively assess the performance of the transformer model, <em>attributions</em><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> for each word in a few selected Tweets were visualised to identify the ability of the model to capture information relevant to flood events, without having to explicitly be fed in keywords <span class="citation" data-cites="sundararajan2017">(<a href="#ref-sundararajan2017" role="doc-biblioref">Sundararajan, Taly, and Yan 2017</a>)</span>.</p>
<p>Overall the classification model out-performed the rule-based method on the validation subset, achieving an F<sub>1</sub> score of 0.938, compared with 0.814 for the rule-base approach. There is both a lower recall for the rule-based model (0.905 compared with 0.952), and a lower precision (0.952 compared with 0.988).</p>
<p><a href="#fig-transformerviz" class="quarto-xref">Figure&nbsp;2</a> explores the decisions made by the transformer model, using four example Tweets to demonstrate the <em>attribution</em> given to each token when assigning a label. Figure <span class="math inline">\(\ref{fig:transformerviz}\)</span> (A) first gives an example Tweet that is correctly identified as being flood related by the transformer, but does not contain any selected flood related keywords. In this example three keywords are highlighted as important by the model for its correct classification <em>gravel, river</em> and <em>wier</em>. This suggests that the model is able to infer from context that these words relate to flooding, rather than having to be explicitly told through feature engineering or keywords.</p>
<div id="fig-transformerviz" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-transformerviz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./figs/transformer_full.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-transformerviz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Attribution levels for selected Tweets classified by the transformer model. Attribution label indicates the human annotated label, predicted label shows assigned label with confidence values. Positive attributions dictate the importance of a feature in the given label prediction.
</figcaption>
</figure>
</div>
<p>On <a href="#fig-transformerviz" class="quarto-xref">Figure&nbsp;2</a> (B), an example is chosen where the model was able to correctly identify the Tweet as being unrelated to flooding, but contains the keyword <em>lightning</em> meaning the rule-based method incorrectly identified it as flood related. Several keywords again appear important for this correct classification, <em>finally</em> which is unlikely to appear in Tweets relevant to floods, in addition to <em>apples</em> and <em>ipad pro</em>, both of which likely appear relatively frequently on Twitter, but rarely in flood related contexts.</p>
<p>The final two sub-figures give examples where the model gives incorrect classifications, but the rule-based method does not. <a href="#fig-transformerviz" class="quarto-xref">Figure&nbsp;2</a> (C) shows that while the model realises that <em>raining</em> is a word positively associated with flooding, the rest of the sentence implies that the overall Tweet is likely not in reference to a flooding event. This example reflects a potential issue with selecting a broad annotation scheme, which considered mentions of weather that may relate to flooding events to be a positive match. A Tweet like this is relatively borderline, even for human annotation, meaning it is unsurprising that the model struggles to make a correct decision. This issue is also reflected in <a href="#fig-transformerviz" class="quarto-xref">Figure&nbsp;2</a> (D), the words <em>tide, mark</em> and <em>kent</em> are all identified as flood related words, which is likely true and the label reflects an issue with human annotation.</p>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>While the transformer-based classification model outperforms a rule-based approach, they present different benefits and costs. Supervised classification through a neural network relies heavily on a suitable amount of high quality labelled data, which presents an initial time-cost. Keyword selection is comparatively straightforward, and does not rely on a pre-existing corpus of relevant text. The training and inference for the transformer model also costs both time and resources, while keyword selection may be applied directly during the extraction of Tweets through the Twitter API.</p>
<p>Keywords however are inherently subjective, as demonstrated by past work which found varying selections of keywords to be appropriate the classification of flood related Tweets <span class="citation" data-cites="spielhofer2016 arthur2018 saravanou2015">(<a href="#ref-spielhofer2016" role="doc-biblioref">Spielhofer et al. 2016</a>; <a href="#ref-arthur2018" role="doc-biblioref">Arthur et al. 2018</a>; <a href="#ref-saravanou2015" role="doc-biblioref">Saravanou et al. 2015</a>)</span>. Constructing a labelled corpus a broad binary classification of Tweets to train a supervised model is less subjective, as the model itself may use the context provided through the training data to independently learn how to approach the classifications. This increased complexity means, through higher recall and precision, the model approach retrieves more relevant information, while ignoring a higher proportion of irrelevant information.</p>
<p>The complexity of the transformer architecture itself also presents improvements over past machine learning methods, as word order is preserved, and the pre-trained word embeddings mean no <em>ad hoc</em> feature engineering is required, which may have contributed to some bias and over-fitting in past work <span class="citation" data-cites="caragea2016">(<a href="#ref-caragea2016" role="doc-biblioref">Caragea, Silvescu, and Tapia 2016</a>)</span>. Appropriate use of semantic context is a particular benefit of the transformer architecture over simpler deep learning methods, notable on <a href="#fig-transformerviz" class="quarto-xref">Figure&nbsp;2</a> (B), which indicates that while lightning is likely considered by the model in most contexts to be associated with floods, the model is able to consider this instance independently, understanding that in this context the word <em>‘lightning’</em> is not weather related. Further work should consider using the entire corpus of 89,864 Tweets extracted relating to UK flood events to train a more robust model.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-algiriyage2021" class="csl-entry" role="listitem">
Algiriyage, Nilani, and Raj Prasanna. 2021. <span>“Identifying <span class="nocase">Disaster-related Tweets</span>: <span>A Large-Scale Detection Model Comparison</span>,”</span> 13.
</div>
<div id="ref-arthur2018" class="csl-entry" role="listitem">
Arthur, Rudy, Chris A. Boulton, Humphrey Shotton, and Hywel T. P. Williams. 2018. <span>“Social Sensing of Floods in the <span>UK</span>.”</span> Edited by Guy J-P. Schumann. <em>PLOS ONE</em> 13 (1): e0189327. <a href="https://doi.org/10.1371/journal.pone.0189327">https://doi.org/10.1371/journal.pone.0189327</a>.
</div>
<div id="ref-ashktorab2014" class="csl-entry" role="listitem">
Ashktorab, Zahra, Christopher Brown, Manojit Nandi, and Aron Culotta. 2014. <span>“Tweedr: <span>Mining Twitter</span> to <span>Inform</span>,”</span> 5.
</div>
<div id="ref-barbieri2020" class="csl-entry" role="listitem">
Barbieri, Francesco, Jose Camacho-Collados, Leonardo Neves, and Luis Espinosa-Anke. 2020. <span>“<span>TweetEval</span>: <span>Unified Benchmark</span> and <span>Comparative Evaluation</span> for <span>Tweet Classification</span>.”</span> <em>arXiv:2010.12421 [Cs]</em>, October. <a href="https://arxiv.org/abs/2010.12421">https://arxiv.org/abs/2010.12421</a>.
</div>
<div id="ref-brouwer2017" class="csl-entry" role="listitem">
Brouwer, Tom, Dirk Eilander, Arnejan van Loenen, Martijn J. Booij, Kathelijne M. Wijnberg, Jan S. Verkade, and Jurjen Wagemaker. 2017. <span>“Probabilistic Flood Extent Estimates from Social Media Flood Observations.”</span> <em>Natural Hazards and Earth System Sciences</em> 17 (5): 735–47. <a href="https://doi.org/10.5194/nhess-17-735-2017">https://doi.org/10.5194/nhess-17-735-2017</a>.
</div>
<div id="ref-caragea2011" class="csl-entry" role="listitem">
Caragea, Cornelia, Nathan McNeese, Anuj Jaiswal, Greg Traylor, Hyun-Woo Kim, Prasenjit Mitra, Dinghao Wu, et al. 2011. <span>“Classifying <span>Text Messages</span> for the <span>Haiti Earthquake</span>,”</span> 10.
</div>
<div id="ref-caragea2016" class="csl-entry" role="listitem">
Caragea, Cornelia, Adrian Silvescu, and Andrea H Tapia. 2016. <span>“Identifying <span>Informative Messages</span> in <span>Disaster Events</span> Using <span>Convolutional Neural Networks</span>,”</span> 8.
</div>
<div id="ref-carley2016" class="csl-entry" role="listitem">
Carley, Kathleen M., Momin Malik, Peter M. Landwehr, Jürgen Pfeffer, and Michael Kowalchuck. 2016. <span>“Crowd Sourcing Disaster Management: <span>The</span> Complex Nature of <span>Twitter</span> Usage in <span>Padang Indonesia</span>.”</span> <em>Safety Science</em> 90 (December): 48–61. <a href="https://doi.org/10.1016/j.ssci.2016.04.002">https://doi.org/10.1016/j.ssci.2016.04.002</a>.
</div>
<div id="ref-debruijn2020" class="csl-entry" role="listitem">
de Bruijn, Jens A., Hans de Moel, Albrecht H. Weerts, Marleen C. de Ruiter, Erkan Basar, Dirk Eilander, and Jeroen C. J. H. Aerts. 2020. <span>“Improving the Classification of Flood Tweets with Contextual Hydrological Information in a Multimodal Neural Network.”</span> <em>Computers &amp; Geosciences</em> 140 (July): 104485. <a href="https://doi.org/10.1016/j.cageo.2020.104485">https://doi.org/10.1016/j.cageo.2020.104485</a>.
</div>
<div id="ref-forzieri2017" class="csl-entry" role="listitem">
Forzieri, Giovanni, Alessandro Cescatti, Filipe Batista e Silva, and Luc Feyen. 2017. <span>“Increasing Risk over Time of Weather-Related Hazards to the <span>European</span> Population: A Data-Driven Prognostic Study.”</span> <em>The Lancet Planetary Health</em> 1 (5): e200–208. <a href="https://doi.org/10.1016/s2542-5196(17)30082-7">https://doi.org/10.1016/s2542-5196(17)30082-7</a>.
</div>
<div id="ref-ghafarian2020" class="csl-entry" role="listitem">
Ghafarian, Seyed Hossein, and Hadi Sadoghi Yazdi. 2020. <span>“Identifying Crisis-Related Informative Tweets Using Learning on Distributions.”</span> <em>Information Processing &amp; Management</em> 57 (2): 102145. <a href="https://doi.org/10.1016/j.ipm.2019.102145">https://doi.org/10.1016/j.ipm.2019.102145</a>.
</div>
<div id="ref-hughes2014" class="csl-entry" role="listitem">
Hughes, Amanda L., Lise A. A. St. Denis, Leysia Palen, and Kenneth M. Anderson. 2014. <span>“Online Public Communications by Police &amp; Fire Services During the 2012 <span>Hurricane Sandy</span>.”</span> In <em>Proceedings of the <span>SIGCHI Conference</span> on <span>Human Factors</span> in <span>Computing Systems</span></em>, 1505–14. <span>Toronto Ontario Canada</span>: <span>ACM</span>. <a href="https://doi.org/10.1145/2556288.2557227">https://doi.org/10.1145/2556288.2557227</a>.
</div>
<div id="ref-imran2013" class="csl-entry" role="listitem">
Imran, Muhammad, Shady Elbassuoni, Carlos Castillo, Fernando Diaz, and Patrick Meier. 2013. <span>“Extracting <span>Information Nuggets</span> from <span>Disaster- Related Messages</span> in <span>Social Media</span>,”</span> 10.
</div>
<div id="ref-imran2020" class="csl-entry" role="listitem">
Imran, Muhammad, Ferda Ofli, Doina Caragea, and Antonio Torralba. 2020. <span>“Using <span>AI</span> and <span>Social Media Multimodal Content</span> for <span>Disaster Response</span> and <span>Management</span>: <span>Opportunities</span>, <span>Challenges</span>, and <span>Future Directions</span>.”</span> <em>Information Processing &amp; Management</em> 57 (5): 102261. <a href="https://doi.org/10.1016/j.ipm.2020.102261">https://doi.org/10.1016/j.ipm.2020.102261</a>.
</div>
<div id="ref-kim2018" class="csl-entry" role="listitem">
Kim, Jooho, and Makarand Hastak. 2018. <span>“Social Network Analysis: <span>Characteristics</span> of Online Social Networks After a Disaster.”</span> <em>International Journal of Information Management</em> 38 (1): 86–96. <a href="https://doi.org/10.1016/j.ijinfomgt.2017.08.003">https://doi.org/10.1016/j.ijinfomgt.2017.08.003</a>.
</div>
<div id="ref-kron2019" class="csl-entry" role="listitem">
Kron, Wolfgang, Petra Löw, and Zbigniew W. Kundzewicz. 2019. <span>“Changes in Risk of Extreme Weather Events in <span>Europe</span>.”</span> <em>Environmental Science &amp; Policy</em> 100 (October): 74–83. <a href="https://doi.org/10.1016/j.envsci.2019.06.007">https://doi.org/10.1016/j.envsci.2019.06.007</a>.
</div>
<div id="ref-kryvasheyeu2016" class="csl-entry" role="listitem">
Kryvasheyeu, Yury, Haohui Chen, Nick Obradovich, Esteban Moro, Pascal Van Hentenryck, James Fowler, and Manuel Cebrian. 2016. <span>“Rapid Assessment of Disaster Damage Using Social Media Activity.”</span> <em>Science Advances</em> 2 (3): e1500779. <a href="https://doi.org/10.1126/sciadv.1500779">https://doi.org/10.1126/sciadv.1500779</a>.
</div>
<div id="ref-laylavi2016" class="csl-entry" role="listitem">
Laylavi, Farhad, Abbas Rajabifard, and Mohsen Kalantari. 2016. <span>“A <span>Multi-Element Approach</span> to <span>Location Inference</span> of <span>Twitter</span>: <span>A Case</span> for <span>Emergency Response</span>.”</span> <em>ISPRS International Journal of Geo-Information</em> 5 (5): 56. <a href="https://doi.org/10.3390/ijgi5050056">https://doi.org/10.3390/ijgi5050056</a>.
</div>
<div id="ref-li2018b" class="csl-entry" role="listitem">
Li, Lisha, Kevin Jamieson, Giulia DeSalvo, Afshin Rostamizadeh, and Ameet Talwalkar. 2018. <span>“Hyperband: <span>A Novel Bandit-Based Approach</span> to <span>Hyperparameter Optimization</span>,”</span> 52.
</div>
<div id="ref-martinez-rojas2018" class="csl-entry" role="listitem">
Martínez-Rojas, María, María del Carmen Pardo-Ferreira, and Juan Carlos Rubio-Romero. 2018. <span>“Twitter as a Tool for the Management and Analysis of Emergency Situations: <span>A</span> Systematic Literature Review.”</span> <em>International Journal of Information Management</em> 43 (December): 196–208. <a href="https://doi.org/10.1016/j.ijinfomgt.2018.07.008">https://doi.org/10.1016/j.ijinfomgt.2018.07.008</a>.
</div>
<div id="ref-middleton2014" class="csl-entry" role="listitem">
Middleton, Stuart E., Lee Middleton, and Stefano Modafferi. 2014. <span>“Real-<span>Time Crisis Mapping</span> of <span>Natural Disasters Using Social Media</span>.”</span> <em>IEEE Intelligent Systems</em> 29 (2): 9–17. <a href="https://doi.org/10.1109/mis.2013.126">https://doi.org/10.1109/mis.2013.126</a>.
</div>
<div id="ref-morstatter2013" class="csl-entry" role="listitem">
Morstatter, Fred, Juergen Pfeffer, Huan Liu, and Kathleen M Carley. 2013. <span>“Is the <span>Sample Good Enough</span>? <span>Comparing Data</span> from <span>Twitter</span>’s <span>Streaming API</span> with <span>Twitter</span>’s <span>Firehose</span>,”</span> 9.
</div>
<div id="ref-nakayama2018" class="csl-entry" role="listitem">
Nakayama, Hiroki, Takahiro Kubo, Junya Kamura, Yasufumi Taniguchi, and Xu Liang. 2018. <span>“Doccano: Text Annotation for Humans.”</span>
</div>
<div id="ref-nguyen2017" class="csl-entry" role="listitem">
Nguyen, Dat, Kamela Ali Al Mannai, Shafiq Joty, Hassan Sajjad, Muhammad Imran, and Prasenjit Mitra. 2017. <span>“Robust <span>Classification</span> of <span>Crisis-Related Data</span> on <span>Social Networks Using Convolutional Neural Networks</span>.”</span> <em>Proceedings of the International AAAI Conference on Web and Social Media</em> 11 (1): 632–35. <a href="https://doi.org/10.1609/icwsm.v11i1.14950">https://doi.org/10.1609/icwsm.v11i1.14950</a>.
</div>
<div id="ref-perng2013" class="csl-entry" role="listitem">
Perng, Sung-Yueh, Monika Büscher, Lisa Wood, Ragnhild Halvorsrud, Michael Stiso, Leonardo Ramirez, and Amro Al-Akkad. 2013. <span>“Peripheral <span>Response</span>: <span>Microblogging During</span> the 22/7/2011 <span>Norway Attacks</span>.”</span> <em>International Journal of Information Systems for Crisis Response and Management</em> 5 (1): 41–57. <a href="https://doi.org/10.4018/jiscrm.2013010103">https://doi.org/10.4018/jiscrm.2013010103</a>.
</div>
<div id="ref-pota2020" class="csl-entry" role="listitem">
Pota, Marco, Mirko Ventura, Rosario Catelli, and Massimo Esposito. 2020. <span>“An <span>Effective BERT-Based Pipeline</span> for <span>Twitter Sentiment Analysis</span>: <span>A Case Study</span> in <span>Italian</span>.”</span> <em>Sensors</em> 21 (1): 133. <a href="https://doi.org/10.3390/s21010133">https://doi.org/10.3390/s21010133</a>.
</div>
<div id="ref-reilly2021" class="csl-entry" role="listitem">
Reilly, Paul, and Stefania Vicari. 2021. <span>“Organizational <span>Hashtags During Times</span> of <span>Crisis</span>: <span>Analyzing</span> the <span>Broadcasting</span> and <span>Gatekeeping Dynamics</span> of #<span>PorteOuverte During</span> the <span>November</span> 2015 <span>Paris Terror Attacks</span>.”</span> <em>Social Media + Society</em> 7 (1): 205630512199578. <a href="https://doi.org/10.1177/2056305121995788">https://doi.org/10.1177/2056305121995788</a>.
</div>
<div id="ref-sakaki2010" class="csl-entry" role="listitem">
Sakaki, Takeshi, Makoto Okazaki, and Yutaka Matsuo. 2010. <span>“Earthquake Shakes <span>Twitter</span> Users: Real-Time Event Detection by Social Sensors,”</span> 10. <a href="https://doi.org/10.1145/1772690.1772777">https://doi.org/10.1145/1772690.1772777</a>.
</div>
<div id="ref-saravanou2015" class="csl-entry" role="listitem">
Saravanou, Antonia, George Valkanas, Dimitrios Gunopulos, and Gennady Andrienko. 2015. <span>“Twitter <span>Floods</span> When It <span>Rains</span>: <span>A Case Study</span> of the <span>UK Floods</span> in Early 2014.”</span> In <em>Proceedings of the 24th <span>International Conference</span> on <span>World Wide Web</span></em>, 1233–38. <span>Florence Italy</span>: <span>ACM</span>. <a href="https://doi.org/10.1145/2740908.2741730">https://doi.org/10.1145/2740908.2741730</a>.
</div>
<div id="ref-spielhofer2016" class="csl-entry" role="listitem">
Spielhofer, Thomas, Reynold Greenlaw, Deborah Markham, and Anna Hahne. 2016. <span>“Data Mining <span>Twitter</span> During the <span>UK</span> Floods: <span>Investigating</span> the Potential Use of Social Media in Emergency Management.”</span> In <em>2016 3rd <span>International Conference</span> on <span>Information</span> and <span>Communication Technologies</span> for <span>Disaster Management</span> (<span>ICT-DM</span>)</em>, 1–6. <span>Vienna, Austria</span>: <span>IEEE</span>. <a href="https://doi.org/10.1109/ict-dm.2016.7857213">https://doi.org/10.1109/ict-dm.2016.7857213</a>.
</div>
<div id="ref-sundararajan2017" class="csl-entry" role="listitem">
Sundararajan, Mukund, Ankur Taly, and Qiqi Yan. 2017. <span>“Axiomatic <span>Attribution</span> for <span>Deep Networks</span>.”</span> <em>arXiv:1703.01365 [Cs]</em>, June. <a href="https://arxiv.org/abs/1703.01365">https://arxiv.org/abs/1703.01365</a>.
</div>
<div id="ref-wolf2020" class="csl-entry" role="listitem">
Wolf, Thomas, Lysandre Debut, Victor Sanh, Julien Chaumond, Clement Delangue, Anthony Moi, Pierric Cistac, et al. 2020. <span>“Transformers: <span class="nocase">State-of-the-art</span> Natural Language Processing.”</span> In <em>Proceedings of the 2020 Conference on Empirical Methods in Natural Language Processing: <span>System</span> Demonstrations</em>, 38–45. <span>Online</span>: <span>Association for Computational Linguistics</span>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Available on the <a href="https://huggingface.co/cardiffnlp/twitter-roberta-base">Huggingface Model Hub</a> <span class="citation" data-cites="wolf2020">(<a href="#ref-wolf2020" role="doc-biblioref">Wolf et al. 2020</a>)</span><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://github.com/cdpierse/transformers-interpret<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@inproceedings{berragan2022,
  author = {Berragan, Cillian and Singleton, Alex and Calafiore, Alessia
    and Morley, Jeremy},
  title = {Comparing Rule-Based Methods and Pre-Trained Language Models
    to Classify Flood Related {Tweets}},
  booktitle = {30th GISRUK Conference 2022},
  date = {2022-03-29},
  url = {https://zenodo.org/records/6411499/files/GISRUK_2022_paper_45.pdf},
  doi = {10.5281/zenodo.6411499},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-berragan2022" class="csl-entry quarto-appendix-citeas" role="listitem">
Berragan, Cillian, Alex Singleton, Alessia Calafiore, and Jeremy Morley.
2022. <span>“Comparing Rule-Based Methods and Pre-Trained Language
Models to Classify Flood Related Tweets.”</span> In <em>30th GISRUK
Conference 2022</em>. <a href="https://doi.org/10.5281/zenodo.6411499">https://doi.org/10.5281/zenodo.6411499</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>