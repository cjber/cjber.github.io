<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-09-09">
<meta name="keywords" content="social media, natural language processing, social interaction">

<title>cjber.github.io - Geoparsing comments from Reddit to extract mental place connectivity within the United Kingdom</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">cjber.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data sources</a></li>
  <li><a href="#geoparsing" id="toc-geoparsing" class="nav-link" data-scroll-target="#geoparsing">Geoparsing</a></li>
  <li><a href="#measuring-place-connectivity" id="toc-measuring-place-connectivity" class="nav-link" data-scroll-target="#measuring-place-connectivity">Measuring place connectivity</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#place-connectivity" id="toc-place-connectivity" class="nav-link" data-scroll-target="#place-connectivity">Place connectivity</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.odt"><i class="bi bi-file"></i>OpenOffice</a></li><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF (arxiv)</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Geoparsing comments from Reddit to extract mental place connectivity within the United Kingdom</h1>
<p class="subtitle lead"><i class="ai  ai-open-access"></i> <i class="ai  ai-doi"></i></p>
  <div class="quarto-categories">
    <div class="quarto-category">open-access</div>
    <div class="quarto-category">peer-reviewed</div>
    <div class="quarto-category">conference</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Cillian Berragan <a href="mailto:c.berragan@liverpool.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0003-2198-2245" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Liverpool
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Alex Singleton <a href="mailto:alex.singleton@liverpool.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-2338-2334" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Liverpool
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Alessia Calafiore <a href="mailto:acalafio@ed.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-5953-2891" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Edinburgh
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Jeremy Morley <a href="mailto:Jeremy.Morley@os.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-3658-8796" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Ordnance Survey
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 9, 2022</p>
    </div>
  </div>
  
    
    <div>
    <div class="quarto-title-meta-heading">Doi</div>
    <div class="quarto-title-meta-contents">
      <p class="doi">
        <a href="https://doi.org/10.25436/E28C7R">10.25436/E28C7R</a>
      </p>
    </div>
  </div>
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>Place connectivity is explored between geographic locations extracted from comments on Reddit. Unlike formally structured geographic data, this corpus of unstructured text provides connections derived from co-occurring locations, capturing subconscious links between them, alongside inherent biases. Our work demonstrates the ability to link locations mentioned by unique users, building ‘mental’ place connections for over 50,000 unique locations in the United Kingdom. Sentiment regarding locations is compared against their levels of connectivity, demonstrating that user opinions regarding locations are likely drivers in mental place connectivity.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>social media, natural language processing, social interaction</p>
  </div>
</div>

</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Connectivity between places may be explored through the physical movement of individuals, using population movement data like transport records <span class="citation" data-cites="yang2019 allard2016 gong2021 farber2013">(<a href="#ref-yang2019" role="doc-biblioref">Yang, Li, and Li 2019</a>; <a href="#ref-allard2016" role="doc-biblioref">Allard and Moura 2016</a>; <a href="#ref-gong2021" role="doc-biblioref">Gong et al. 2021</a>; <a href="#ref-farber2013" role="doc-biblioref">Farber and Li 2013</a>)</span>, or GPS information through mobile phone data <span class="citation" data-cites="lin2019 safegraph2022">(<a href="#ref-lin2019" role="doc-biblioref">Lin, Wu, and Li 2019</a>; <a href="#ref-safegraph2022" role="doc-biblioref">SafeGraph 2022</a>)</span>. Due to the advent of ‘Volunteered Geographic Information’ (VGI) <span class="citation" data-cites="goodchild2007">(<a href="#ref-goodchild2007" role="doc-biblioref">Goodchild 2007</a>)</span>, these connections may also be explored through geotagged social media posts <span class="citation" data-cites="arthur2019 ostermann2015 li2021">(<a href="#ref-arthur2019" role="doc-biblioref">Arthur and Williams 2019</a>; <a href="#ref-ostermann2015" role="doc-biblioref">Ostermann et al. 2015</a>; <a href="#ref-li2021" role="doc-biblioref">Li et al. 2021</a>)</span>, with results that mirror true population movements [li2021;<span class="citation" data-cites="kuchler2020">Kuchler, Russel, and Stroebel (<a href="#ref-kuchler2020" role="doc-biblioref">2020</a>)</span>].</p>
<p>Literature discussing the role of human cognition in constructing mental images of cities <span class="citation" data-cites="lynch1964">(<a href="#ref-lynch1964" role="doc-biblioref">Lynch 1964</a>)</span>, and how they can be represented through mental maps <span class="citation" data-cites="gould1986">(<a href="#ref-gould1986" role="doc-biblioref">Gould and White 1986</a>)</span>, shows that the way humans conceive spatial structures and place relationships are substantially entrenched in individuals’ experiences and geographic knowledge, which only partially derive from movements. In particular, while movements are constrained by time and euclidean distance in geographic space <span class="citation" data-cites="miller2018 patterson2015">(<a href="#ref-miller2018" role="doc-biblioref">Miller 2018</a>; <a href="#ref-patterson2015" role="doc-biblioref">Patterson and Farber 2015</a>)</span>, representational spaces expressed in mental maps do not necessarily correlate with these spatio-temporal boundaries.</p>
<p>New forms of data, especially social media and text data, offer novel opportunities to explore place connections, emerging from peoples naïve and experiential geographic knowledge. Recent studies have investigated how digital social networks, i.e.&nbsp;Facebook friendships <span class="citation" data-cites="bailey2018">(<a href="#ref-bailey2018" role="doc-biblioref">Bailey et al. 2018</a>)</span>, may be explored in this regard. While, geo-semantic relatedness outlines the ability to quantify relationships between geographic terms in text <span class="citation" data-cites="ballatore2014">(<a href="#ref-ballatore2014" role="doc-biblioref">Ballatore, Bertolotto, and Wilson 2014</a>)</span>, with work applying this to co-occurring city names found in news articles, social media, and general web pages <span class="citation" data-cites="hu2017 ye2021 liu2014 meijers2019">(<a href="#ref-hu2017" role="doc-biblioref">Hu, Ye, and Shaw 2017</a>; <a href="#ref-ye2021" role="doc-biblioref">Ye, Gong, and Li 2021</a>; <a href="#ref-liu2014" role="doc-biblioref">Liu et al. 2014</a>; <a href="#ref-meijers2019" role="doc-biblioref">Meijers and Peris 2019</a>)</span>. Our paper considers the use of a novel corpus of text data from comments on the online social media website Reddit as a source of VGI. A task-specific geoparsing pipeline is first used to identify place names4 related to the United Kingdom and resolve them to geographic coordinates <span class="citation" data-cites="purves2018">(<a href="#ref-purves2018" role="doc-biblioref">Purves et al. 2018</a>)</span>, at a geographic resolution higher than is typically explored through geoparsing. We derive connectivity between each location in our corpus based on the number of times two distinct locations co-occur, normalised by the total number of users that mention each location. The context for co-occurrences is derived from the total collection of comments submitted by each unique user, meaning every location mentioned by a single user is treated as co-occurring, and exhibiting some implicit connectivity. A full interactive map showing place connections is available through Unfolded.ai.</p>
<p>With the connectivity between places established, we consider the ability to derive explainable characteristics from the text, to determine why different levels of place connectivity occur. While traditional connections between places may be influenced by factors like transport availability <span class="citation" data-cites="allard2016">(<a href="#ref-allard2016" role="doc-biblioref">Allard and Moura 2016</a>)</span>, the alternative mental place connections derived through our paper may be more heavily influenced by a subconscious bias. Connectivity is therefore examined against sentiment, expected to highlight these biases, alongside a standard measure of relative material deprivation (limited to England), through the Indices of Multiple Deprivation (IMD), an alternative measure that would be expected to affect traditional place connectivity.</p>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data sources</h2>
<p>Reddit is a public discussion, news aggregation social network, among the top 20 most visited websites in the United Kingdom. As of 2020, Reddit had around 430 million active monthly users, comparable to the number of Twitter users <span class="citation" data-cites="murphy2019 statista2022">(<a href="#ref-murphy2019" role="doc-biblioref">Murphy 2019</a>; <a href="#ref-statista2022" role="doc-biblioref">Statista 2022</a>)</span>. Reddit is divided into separate independent subreddits each with specific topics of discussion, where users may submit posts which each have dedicated nested conversation threads that users can add comments to. In total there are 213 subreddits that relate to ‘places’ within the United Kingdom<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. For each subreddit, every single historic comment was retrieved using the Pushshift Reddit archive <span class="citation" data-cites="baumgartner2020">(<a href="#ref-baumgartner2020" role="doc-biblioref">Baumgartner et al. 2020</a>)</span>. In total 8,295,591 comments were extracted, submitted by 492,123 unique users, between 2011-01-01 and 2022-04-17.</p>
<p>To train a model to identify place names from comments, the WNUT-17 corpus was used <span class="citation" data-cites="derczynski2017">(<a href="#ref-derczynski2017" role="doc-biblioref">Derczynski et al. 2017</a>)</span>, keeping only ‘location’ labels. In total this corpus covers 5,690 individual documents from Reddit, Twitter, YouTube, and StackExchange. Two gazetteers were selected to geocode place names, chosen to be UK centric, and at a high resolution. We were specifically interested in a gazetteer that did not include country names external to the UK, but included fine-grained named locations like street names. For our gazetteer we combined OS Open Names, and non-settlements from the Gazetteer of British Place Names.</p>
</section>
<section id="geoparsing" class="level2">
<h2 class="anchored" data-anchor-id="geoparsing">Geoparsing</h2>
<p>A custom named entity recognition (NER) model was built using a RoBERTa based transformer language model, pre-trained using Twitter data<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, as this architecture has given good results on the WNUT-17 corpus <span class="citation" data-cites="barbieri2020">(<a href="#ref-barbieri2020" role="doc-biblioref">Barbieri et al. 2020</a>)</span>.</p>
<p>With place names identified, we developed a method for attributing each name to a single set of geographic coordinates. Place names typically appear multiple times in gazetteers, especially when grounding fine-grained locations like street names, meaning a disambiguation method is required. We disambiguate place names by finding their minimum distance to a collection of contextual locations. Contextual locations in this case refer to all gazetteer entries matching place names that appear in sentences with this target place name, in the same subreddit. This works under the assumption that each unique place name in a single subreddit is likely to refer to the same location, and that locations mentioned in surrounding text are likely close together <span class="citation" data-cites="kamalloo2018">(<a href="#ref-kamalloo2018" role="doc-biblioref">Kamalloo and Rafiei 2018</a>)</span>.</p>
<p>Sentiment was attributed to each sentence in our corpus containing a place name, using an existing fine-tuned sentiment classification transformer model<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. Each place name identified by our NER model was assigned sentiment based on its context sentence.</p>
</section>
<section id="measuring-place-connectivity" class="level2">
<h2 class="anchored" data-anchor-id="measuring-place-connectivity">Measuring place connectivity</h2>
<p>Our place connectivity methodology considers the co-occurrence between each place mentioned by every unique user in our corpus. The following equation described by <span class="citation" data-cites="li2021">(<a href="#ref-li2021" role="doc-biblioref">Li et al. 2021</a>)</span> outlines this concept:</p>
<p><span class="math display">\[
PCI_{ij} = \frac{\mathbf{S}_{ij}}{\sqrt{\mathbf{S}_i\mathbf{S}_j}}, i, j \in [1, N]
\]</span></p>
<p><span class="math inline">\(PCI_{ij}\)</span> is the place connectivity index between locations <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>, <span class="math inline">\(\mathbf{S}_{ij}\)</span> is the total number of users that mention both locations (i.e.&nbsp;the intersect in set theory). This is normalised, given locations with higher populations are expected to be mentioned by a larger number of users, using <span class="math inline">\(\sqrt{\mathbf{S}_{i}\mathbf{S}_{j}}\)</span>, the total number of users mentioning <span class="math inline">\(\mathbf{S}_{i}\)</span> multiplied by the total number of users mentioning <span class="math inline">\(\mathbf{S}_{j}\)</span>, taking the square root. <span class="math inline">\(n\)</span> is the total number of unique locations found in all comments.</p>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<p>To assess the performance of our trained NER model we manually annotated 498 randomly selected Reddit comments with place names. On this test dataset, our model achieved an F1 performance of 0.845, a recall of 0.91 and precision of 0.85, above the expected performance on the WNUT test dataset. Similarly, we annotated 200 comments as neutral, positive or negative sentiment, and found the pre-built sentiment model performed as expected <span class="citation" data-cites="loureiro2022">(<a href="#ref-loureiro2022" role="doc-biblioref">Loureiro et al. 2022</a>)</span>, with an F1, recall and precision of 0.70.</p>
<p>In total 26% of all comments contained at least one place name, 4,475,800 place names were identified, with 2,816,072 (63%) attributed with a set of coordinates. From these locations, 57,682 were found to be unique.</p>
<section id="place-connectivity" class="level2">
<h2 class="anchored" data-anchor-id="place-connectivity">Place connectivity</h2>
<div id="fig-connections" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-connections-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figs/connections.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-connections-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Place connections aggregated to Local Authority District, edge size weighted by PCI values, full interactive map available through <a href="https://studio.foursquare.com/public/af5007d8-0d4f-42e8-ab55-857153187644">Unfolded</a>
</figcaption>
</figure>
</div>
<p><a href="#fig-connections" class="quarto-xref">Figure&nbsp;1</a> demonstrates mental place connections when aggregated to Local Authority Districts (LAD). This aggregation is performed by treating a place equivalent to the LAD it is contained in. Aggregation allows for a higher level view of place connections to be observed, for example combining several points of interest within a major city produces a single strong connection, rather than several weaker connections. <a href="#fig-connections" class="quarto-xref">Figure&nbsp;1</a> (a) shows connections within England and Wales. Clusters emerge where isolated urban areas and their surrounding LADs exhibit strong connectivity, for example around London, Liverpool and Manchester, and Bristol. Notably Wales appears reasonably isolated from England, but inter-connectivity between LADs is strong, including in more rural areas. This isolation between Wales and the rest of the UK has also been observed through semantic analysis of Twitter <span class="citation" data-cites="ostermann2015">(<a href="#ref-ostermann2015" role="doc-biblioref">Ostermann et al. 2015</a>)</span>.</p>
<p><a href="#fig-connections" class="quarto-xref">Figure&nbsp;1</a> (b) shows connections within Scotland, these are much stronger generally than the rest of the UK, and highly inter-connected. These connections are also less isolated compared with Wales, with links between Glasgow, Edinburgh and London, as well as strong links with Durham and Newcastle. Links in Scotland are not restricted to urban areas, with strong connections between the rural Highland LAD and all major urban centres. These connections may however be influenced by the varying levels of ambiguity between English place names compared with names in remote Scotland. For example in the ‘Highland’ LAD, 27% of place names are ambiguous, compared with 40% in Manchester, meaning toponym disambiguation is likely more accurate in the Highlands.</p>
<p><a href="#fig-connections" class="quarto-xref">Figure&nbsp;1</a> (c) shows a highly urbanised area of England, with two major cities; Liverpool and Manchester. While Manchester links directly with Liverpool, this figure does not appear to reflect the contiguous urban area that links these two cities <span class="citation" data-cites="dembski2015">(<a href="#ref-dembski2015" role="doc-biblioref">Dembski 2015</a>)</span>, given intermediate LADs are not connected. The link between these two cities appears direct from a mental perspective, meaning intermediate urban zones are perceived as less connected through our index.</p>
<div id="fig-pci" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pci-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figs/pci.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pci-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Correlation between PCI and target (a) IMD, (b) Sentiment, and (c) Dis- tance for unaggregated connections between locations. Connections with fewer than 100 shared users have been excluded. Values aggregated into 200 bins for readability.
</figcaption>
</figure>
</div>
<p>While there are a multitude of factors that affect this mental place connectivity, typical connectivity models explore the effects of distance decay <span class="citation" data-cites="yang2019 gong2021 li2021 bailey2018 hu2017">(<a href="#ref-yang2019" role="doc-biblioref">Yang, Li, and Li 2019</a>; <a href="#ref-gong2021" role="doc-biblioref">Gong et al. 2021</a>; <a href="#ref-li2021" role="doc-biblioref">Li et al. 2021</a>; <a href="#ref-bailey2018" role="doc-biblioref">Bailey et al. 2018</a>; <a href="#ref-hu2017" role="doc-biblioref">Hu, Ye, and Shaw 2017</a>)</span>. As past work has found, with both social and physical connections between places, our mental PCI does experience distance decay, with a medium strength negative correlation between PCI and the log of distance (R = −0.55; p = 0.0; <a href="#fig-pci" class="quarto-xref">Figure&nbsp;2</a> (c)). Additionally we explore how sentiment and deprivation may influence PCI values. <a href="#fig-pci" class="quarto-xref">Figure&nbsp;2</a> (a) shows a significant weak correlation between PCI and sentiment (R = 0.18; p = 0.0), while <a href="#fig-pci" class="quarto-xref">Figure&nbsp;2</a> (b) shows a very weak negative correlation between PCI and the IMD Score (R = −0.04; p = 0.0).</p>
<p>Lower connectivity for places with more negative sentiment may be influenced by factors like ‘fear of crime’ <span class="citation" data-cites="solymosi2021">(<a href="#ref-solymosi2021" role="doc-biblioref">Solymosi et al. 2021</a>)</span>, and given deprivation appears less influential, these perceptions likely capture information that is not directly quantifiable through traditional data sources. Certain areas in the United Kingdom have been shown to have ‘reputations’ <span class="citation" data-cites="kearns2013">(<a href="#ref-kearns2013" role="doc-biblioref">Kearns, Kearns, and Lawson 2013</a>)</span>, meaning they are known to be viewed negatively both inside and outside their occupants, particularly between the North and South of England <span class="citation" data-cites="gould1986">(<a href="#ref-gould1986" role="doc-biblioref">Gould and White 1986</a>)</span>.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Our paper demonstrates the use of Reddit to explore mental place connectivity from a novel source of data, without the reliance on explicit geographic information. Despite Reddit being both more pseudo-anonymous than Twitter (users more frequently use pseudonyms), and without explicit social connections between users (unlike Twitter, followers are not emphasised), mental place connectivity derived through Reddit still exhibits the distance decay that is expected when observing place connectivity <span class="citation" data-cites="yang2019 li2021 bailey2018">(<a href="#ref-yang2019" role="doc-biblioref">Yang, Li, and Li 2019</a>; <a href="#ref-li2021" role="doc-biblioref">Li et al. 2021</a>; <a href="#ref-bailey2018" role="doc-biblioref">Bailey et al. 2018</a>)</span>. While Reddit users are not completely representative of the UK population, the volume of unique users that contribute to this corpus are expected to better reflect a more accurate, general view of mental connectivity, compared to alternative text sources like news articles <span class="citation" data-cites="hu2017">(<a href="#ref-hu2017" role="doc-biblioref">Hu, Ye, and Shaw 2017</a>)</span>.</p>
<p>Future work may consider a further exploration of sentiment between subreddits, London for example may be viewed differently based on subreddit communities focussed on North of England, compared with the South <span class="citation" data-cites="gould1986 jewell1994">(<a href="#ref-gould1986" role="doc-biblioref">Gould and White 1986</a>; <a href="#ref-jewell1994" role="doc-biblioref">Jewell 1994</a>)</span>. There is also the opportunity to explore relationships between locations or communities through their semantic typology; clustering through Latent Dirichlet Allocation (LDA) <span class="citation" data-cites="gao2017">(<a href="#ref-gao2017" role="doc-biblioref">Gao, Janowicz, and Couclelis 2017</a>)</span>, or finding the cosine similarity between derived lexicons <span class="citation" data-cites="arthur2019">(<a href="#ref-arthur2019" role="doc-biblioref">Arthur and Williams 2019</a>)</span>. Locations identified from within these communities also likely represent urban areas of interest which may be derived based on their frequency of mentions <span class="citation" data-cites="chen2019">(<a href="#ref-chen2019" role="doc-biblioref">Chen 2019</a>)</span>, or semantic regions that reflect mental perceptions of places <span class="citation" data-cites="gao2017a">(<a href="#ref-gao2017a" role="doc-biblioref">Gao et al. 2017</a>)</span>.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-allard2016" class="csl-entry" role="listitem">
Allard, Ryan F., and Filipe Moura. 2016. <span>“The <span>Incorporation</span> of <span>Passenger Connectivity</span> and <span>Intermodal Considerations</span> in <span>Intercity Transport Planning</span>.”</span> <em>Transport Reviews</em> 36 (2): 251–77. <a href="https://doi.org/10.1080/01441647.2015.1059379">https://doi.org/10.1080/01441647.2015.1059379</a>.
</div>
<div id="ref-arthur2019" class="csl-entry" role="listitem">
Arthur, Rudy, and Hywel T. P. Williams. 2019. <span>“The Human Geography of <span>Twitter</span>: <span>Quantifying</span> Regional Identity and Inter-Region Communication in <span>England</span> and <span>Wales</span>.”</span> Edited by Emilio Ferrara. <em>PLOS ONE</em> 14 (4): e0214466. <a href="https://doi.org/10.1371/journal.pone.0214466">https://doi.org/10.1371/journal.pone.0214466</a>.
</div>
<div id="ref-bailey2018" class="csl-entry" role="listitem">
Bailey, Michael, Rachel Cao, Theresa Kuchler, Johannes Stroebel, and Arlene Wong. 2018. <span>“Social <span>Connectedness</span>: <span>Measurement</span>, <span>Determinants</span>, and <span>Effects</span>.”</span> <em>Journal of Economic Perspectives</em> 32 (3): 259–80. <a href="https://doi.org/10.1257/jep.32.3.259">https://doi.org/10.1257/jep.32.3.259</a>.
</div>
<div id="ref-ballatore2014" class="csl-entry" role="listitem">
Ballatore, Andrea, Michela Bertolotto, and David C. Wilson. 2014. <span>“An Evaluative Baseline for Geo-Semantic Relatedness and Similarity.”</span> <em>GeoInformatica</em> 18 (4): 747–67. <a href="https://doi.org/10.1007/s10707-013-0197-8">https://doi.org/10.1007/s10707-013-0197-8</a>.
</div>
<div id="ref-barbieri2020" class="csl-entry" role="listitem">
Barbieri, Francesco, Jose Camacho-Collados, Leonardo Neves, and Luis Espinosa-Anke. 2020. <span>“<span>TweetEval</span>: <span>Unified Benchmark</span> and <span>Comparative Evaluation</span> for <span>Tweet Classification</span>.”</span> <em>arXiv:2010.12421 [Cs]</em>, October. <a href="https://arxiv.org/abs/2010.12421">https://arxiv.org/abs/2010.12421</a>.
</div>
<div id="ref-baumgartner2020" class="csl-entry" role="listitem">
Baumgartner, Jason, Savvas Zannettou, Brian Keegan, Megan Squire, and Jeremy Blackburn. 2020. <span>“The <span>Pushshift Reddit Dataset</span>.”</span> <span>arXiv</span>. <a href="https://arxiv.org/abs/2001.08435">https://arxiv.org/abs/2001.08435</a>.
</div>
<div id="ref-chen2019" class="csl-entry" role="listitem">
Chen, Meixu. 2019. <span>“Understanding the Dynamics of Urban Areas of Interest Through Volunteered Geographic Information,”</span> 21. <a href="https://doi.org/10.1007/s10109-018-0284-3">https://doi.org/10.1007/s10109-018-0284-3</a>.
</div>
<div id="ref-dembski2015" class="csl-entry" role="listitem">
Dembski, Sebastian. 2015. <span>“Structure and Imagination of Changing Cities: <span>Manchester</span>, <span>Liverpool</span> and the Spatial in-Between.”</span> <em>Urban Studies</em> 52 (9): 1647–64. <a href="https://doi.org/10.1177/0042098014539021">https://doi.org/10.1177/0042098014539021</a>.
</div>
<div id="ref-derczynski2017" class="csl-entry" role="listitem">
Derczynski, Leon, Eric Nichols, Marieke van Erp, and Nut Limsopatham. 2017. <span>“Results of the <span>WNUT2017 Shared Task</span> on <span>Novel</span> and <span>Emerging Entity Recognition</span>.”</span> In <em>Proceedings of the 3rd <span>Workshop</span> on <span class="nocase">Noisy User-generated Text</span></em>, 140–47. <span>Copenhagen, Denmark</span>: <span>Association for Computational Linguistics</span>. <a href="https://doi.org/10.18653/v1/W17-4418">https://doi.org/10.18653/v1/W17-4418</a>.
</div>
<div id="ref-farber2013" class="csl-entry" role="listitem">
Farber, Steven, and Xiao Li. 2013. <span>“Urban Sprawl and Social Interaction Potential: An Empirical Analysis of Large Metropolitan Regions in the <span>United States</span>.”</span> <em>Journal of Transport Geography</em> 31 (July): 267–77. <a href="https://doi.org/10.1016/j.jtrangeo.2013.03.002">https://doi.org/10.1016/j.jtrangeo.2013.03.002</a>.
</div>
<div id="ref-gao2017" class="csl-entry" role="listitem">
Gao, Song, Krzysztof Janowicz, and Helen Couclelis. 2017. <span>“Extracting Urban Functional Regions from Points of Interest and Human Activities on Location-Based Social Networks.”</span> <em>Transactions in GIS</em> 21 (3): 446–67. <a href="https://doi.org/10.1111/tgis.12289">https://doi.org/10.1111/tgis.12289</a>.
</div>
<div id="ref-gao2017a" class="csl-entry" role="listitem">
Gao, Song, Krzysztof Janowicz, Daniel R. Montello, Yingjie Hu, Jiue-An Yang, Grant McKenzie, Yiting Ju, Li Gong, Benjamin Adams, and Bo Yan. 2017. <span>“A Data-Synthesis-Driven Method for Detecting and Extracting Vague Cognitive Regions.”</span> <em>International Journal of Geographical Information Science</em> 31 (6): 1245–71. <a href="https://doi.org/10.1080/13658816.2016.1273357">https://doi.org/10.1080/13658816.2016.1273357</a>.
</div>
<div id="ref-gong2021" class="csl-entry" role="listitem">
Gong, Junfang, Shengwen Li, Xinyue Ye, Qiong Peng, and Sonali Kudva. 2021. <span>“Modelling Impacts of High-Speed Rail on Urban Interaction with Social Media in <span>China</span>’s Mainland.”</span> <em>Geo-Spatial Information Science</em> 24 (4): 638–53. <a href="https://doi.org/10.1080/10095020.2021.1972771">https://doi.org/10.1080/10095020.2021.1972771</a>.
</div>
<div id="ref-goodchild2007" class="csl-entry" role="listitem">
Goodchild, Michael F. 2007. <span>“Citizens as Sensors: The World of Volunteered Geography.”</span> <em>GeoJournal</em> 69 (4): 211–21. <a href="https://doi.org/10.1007/s10708-007-9111-y">https://doi.org/10.1007/s10708-007-9111-y</a>.
</div>
<div id="ref-gould1986" class="csl-entry" role="listitem">
Gould, Peter R., and Rodney White. 1986. <em>Mental <span>Maps</span>.</em> <span>Hoboken</span>: <span>Taylor and Francis</span>.
</div>
<div id="ref-hu2017" class="csl-entry" role="listitem">
Hu, Yingjie, Xinyue Ye, and Shih-Lung Shaw. 2017. <span>“Extracting and Analyzing Semantic Relatedness Between Cities Using News Articles.”</span> <em>International Journal of Geographical Information Science</em> 31 (12): 2427–51. <a href="https://doi.org/10.1080/13658816.2017.1367797">https://doi.org/10.1080/13658816.2017.1367797</a>.
</div>
<div id="ref-jewell1994" class="csl-entry" role="listitem">
Jewell, Helen M. 1994. <em>The <span class="nocase">North-south Divide</span>: <span>The Origins</span> of <span>Northern Consciousness</span> in <span>England</span></em>. <span>Manchester University Press</span>.
</div>
<div id="ref-kamalloo2018" class="csl-entry" role="listitem">
Kamalloo, Ehsan, and Davood Rafiei. 2018. <span>“A <span>Coherent Unsupervised Model</span> for <span>Toponym Resolution</span>.”</span> In <em>Proceedings of the 2018 <span>World Wide Web Conference</span> on <span>World Wide Web</span> - <span>WWW</span> ’18</em>, 1287–96. <span>Lyon, France</span>: <span>ACM Press</span>. <a href="https://doi.org/10.1145/3178876.3186027">https://doi.org/10.1145/3178876.3186027</a>.
</div>
<div id="ref-kearns2013" class="csl-entry" role="listitem">
Kearns, Ade, Oliver Kearns, and Louise Lawson. 2013. <span>“Notorious <span>Places</span>: <span>Image</span>, <span>Reputation</span>, <span>Stigma</span>. <span>The Role</span> of <span>Newspapers</span> in <span>Area Reputations</span> for <span>Social Housing Estates</span>.”</span> <em>Housing Studies</em> 28 (4): 579–98. <a href="https://doi.org/10.1080/02673037.2013.759546">https://doi.org/10.1080/02673037.2013.759546</a>.
</div>
<div id="ref-kuchler2020" class="csl-entry" role="listitem">
Kuchler, Theresa, Dominic Russel, and Johannes Stroebel. 2020. <span>“The <span>Geographic Spread</span> of <span>COVID-19 Correlates</span> with the <span>Structure</span> of <span>Social Networks</span> as <span>Measured</span> by <span>Facebook</span>.”</span> w26990. <span>Cambridge, MA</span>: <span>National Bureau of Economic Research</span>. <a href="https://doi.org/10.3386/w26990">https://doi.org/10.3386/w26990</a>.
</div>
<div id="ref-li2021" class="csl-entry" role="listitem">
Li, Zhenlong, Xiao Huang, Xinyue Ye, Yuqin Jiang, Yago Martin, Huan Ning, Michael E. Hodgson, and Xiaoming Li. 2021. <span>“Measuring Global Multi-Scale Place Connectivity Using Geotagged Social Media Data.”</span> <em>Scientific Reports</em> 11 (1): 14694. <a href="https://doi.org/10.1038/s41598-021-94300-7">https://doi.org/10.1038/s41598-021-94300-7</a>.
</div>
<div id="ref-lin2019" class="csl-entry" role="listitem">
Lin, Jinyao, Zhifeng Wu, and Xia Li. 2019. <span>“Measuring Inter-City Connectivity in an Urban Agglomeration Based on Multi-Source Data.”</span> <em>International Journal of Geographical Information Science</em> 33 (5): 1062–81. <a href="https://doi.org/10.1080/13658816.2018.1563302">https://doi.org/10.1080/13658816.2018.1563302</a>.
</div>
<div id="ref-liu2014" class="csl-entry" role="listitem">
Liu, Yu, Fahui Wang, Chaogui Kang, Yong Gao, and Yongmei Lu. 2014. <span>“Analyzing <span>Relatedness</span> by <span>Toponym Co-Occurrences</span> on <span>Web Pages</span>: <span>Analyzing Relatedness</span> by <span>Toponym Co-Occurrences</span> on <span>Web Pages</span>.”</span> <em>Transactions in GIS</em> 18 (1): 89–107. <a href="https://doi.org/10.1111/tgis.12023">https://doi.org/10.1111/tgis.12023</a>.
</div>
<div id="ref-loureiro2022" class="csl-entry" role="listitem">
Loureiro, Daniel, Francesco Barbieri, Leonardo Neves, Luis Espinosa Anke, and Jose Camacho-Collados. 2022. <span>“<span>TimeLMs</span>: <span>Diachronic Language Models</span> from <span>Twitter</span>.”</span> <span>arXiv</span>. <a href="https://arxiv.org/abs/2202.03829">https://arxiv.org/abs/2202.03829</a>.
</div>
<div id="ref-lynch1964" class="csl-entry" role="listitem">
Lynch, Kevin. 1964. <em>The <span>Image</span> of the <span>City</span></em>. <span>MIT Press</span>.
</div>
<div id="ref-meijers2019" class="csl-entry" role="listitem">
Meijers, Evert, and Antoine Peris. 2019. <span>“Using Toponym Co-Occurrences to Measure Relationships Between Places: Review, Application and Evaluation.”</span> <em>International Journal of Urban Sciences</em> 23 (2): 246–68. <a href="https://doi.org/10.1080/12265934.2018.1497526">https://doi.org/10.1080/12265934.2018.1497526</a>.
</div>
<div id="ref-miller2018" class="csl-entry" role="listitem">
Miller, Harvey J. 2018. <span>“Time Geography.”</span> <em>Handbook of Behavioral and Cognitive Geography</em>, 74–94. <a href="https://doi.org/10.4337/9781784717544.00011">https://doi.org/10.4337/9781784717544.00011</a>.
</div>
<div id="ref-murphy2019" class="csl-entry" role="listitem">
Murphy, Nicole. 2019. <span>“Reddit’s 2019 <span>Year</span> in <span>Review</span> - <span>Upvoted</span>.”</span> https://www.redditinc.com/blog/reddits-2019-year-in-review/#content.
</div>
<div id="ref-ostermann2015" class="csl-entry" role="listitem">
Ostermann, F. O., H. Huang, G. Andrienko, N. Andrienko, C. Capineri, K. Farkas, and R. S. Purves. 2015. <span>“Extracting and Comparing Places Using Geo-Social Media.”</span> <em>ISPRS Annals of the Photogrammetry, Remote Sensing and Spatial Information Sciences</em> II-3/W5 (August): 311–16. <a href="https://doi.org/10.5194/isprsannals-II-3-W5-311-2015">https://doi.org/10.5194/isprsannals-II-3-W5-311-2015</a>.
</div>
<div id="ref-patterson2015" class="csl-entry" role="listitem">
Patterson, Zachary, and Steven Farber. 2015. <span>“Potential <span>Path Areas</span> and <span>Activity Spaces</span> in <span>Application</span>: <span>A Review</span>.”</span> <em>Transport Reviews</em> 35 (6): 679–700. <a href="https://doi.org/10.1080/01441647.2015.1042944">https://doi.org/10.1080/01441647.2015.1042944</a>.
</div>
<div id="ref-purves2018" class="csl-entry" role="listitem">
Purves, Ross S., Paul Clough, Christopher B. Jones, Mark H. Hall, and Vanessa Murdock. 2018. <em>Geographic <span>Information Retrieval</span>: <span>Progress</span> and <span>Challenges</span> in <span>Spatial Search</span> of <span>Text</span></em>. <span>now</span>. <a href="https://doi.org/10.1561/1500000034">https://doi.org/10.1561/1500000034</a>.
</div>
<div id="ref-safegraph2022" class="csl-entry" role="listitem">
SafeGraph. 2022. <span>“Places <span>Data Curated</span> for <span>Accurate Geospatial Analytics</span> <span></span> <span>SafeGraph</span>.”</span> https://www.safegraph.com.
</div>
<div id="ref-solymosi2021" class="csl-entry" role="listitem">
Solymosi, Reka, David Buil-Gil, Laura Vozmediano, and Inês Sousa Guedes. 2021. <span>“Towards a <span class="nocase">Place-based Measure</span> of <span>Fear</span> of <span>Crime</span>: <span>A Systematic Review</span> of <span class="nocase">App-based</span> and <span>Crowdsourcing Approaches</span>.”</span> <em>Environment and Behavior</em> 53 (9): 1013–44. <a href="https://doi.org/10.1177/0013916520947114">https://doi.org/10.1177/0013916520947114</a>.
</div>
<div id="ref-statista2022" class="csl-entry" role="listitem">
Statista. 2022. <span>“Most Popular Social Networks Worldwide as of <span>January</span> 2022, Ranked by Number of Monthly Active Users.”</span> <em>Statista</em>. https://www.statista.com/statistics/272014/global-social-networks-ranked-by-number-of-users/.
</div>
<div id="ref-yang2019" class="csl-entry" role="listitem">
Yang, Yang, Dong Li, and Xiang (Robert) Li. 2019. <span>“Public <span>Transport Connectivity</span> and <span>Intercity Tourist Flows</span>.”</span> <em>Journal of Travel Research</em> 58 (1): 25–41. <a href="https://doi.org/10.1177/0047287517741997">https://doi.org/10.1177/0047287517741997</a>.
</div>
<div id="ref-ye2021" class="csl-entry" role="listitem">
Ye, Xinyue, Junfang Gong, and Shengwen Li. 2021. <span>“Analyzing <span>Asymmetric City Connectivity</span> by <span>Toponym</span> on <span>Social Media</span> in <span>China</span>.”</span> <em>Chinese Geographical Science</em> 31 (1): 14–26. <a href="https://doi.org/10.1007/s11769-020-1172-6">https://doi.org/10.1007/s11769-020-1172-6</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://reddit.com/r/unitedkingdom/wiki/british_subreddits<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://huggingface.co/cardiffnlp/twitter-roberta-base<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>https://huggingface.co/cardiffnlp/twitter-roberta-base-sentiment-latest<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@inproceedings{berragan2022,
  author = {Berragan, Cillian and Singleton, Alex and Calafiore, Alessia
    and Morley, Jeremy},
  title = {Geoparsing Comments from {Reddit} to Extract Mental Place
    Connectivity Within the {United} {Kingdom}},
  booktitle = {Spatial Data Science Symposium 2022 Short Paper
    Proceedings},
  date = {2022-09-09},
  url = {https://escholarship.org/uc/item/4wg37921},
  doi = {10.25436/E28C7R},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-berragan2022" class="csl-entry quarto-appendix-citeas" role="listitem">
Berragan, Cillian, Alex Singleton, Alessia Calafiore, and Jeremy Morley.
2022. <span>“Geoparsing Comments from Reddit to Extract Mental Place
Connectivity Within the United Kingdom.”</span> In <em>Spatial Data
Science Symposium 2022 Short Paper Proceedings</em>. <a href="https://doi.org/10.25436/E28C7R">https://doi.org/10.25436/E28C7R</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/cjber\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>